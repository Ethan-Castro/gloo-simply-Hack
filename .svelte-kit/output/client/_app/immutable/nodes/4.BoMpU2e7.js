import{s as R,n as $,c as U,o as B}from"../chunks/scheduler.Cbr1s69T.js";import{S as G,i as J,e as p,s as M,c as b,a as w,d as y,b as E,g as F,f as h,h as N,j as r,l as K,w as Q,t as L,m as j,n as O}from"../chunks/index.CIUrMkBs.js";import{i as X,s as Y,m as Z}from"../chunks/websocket.BFXeoziI.js";function q(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}const ne=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function A(n,t,l){const c=n.slice();return c[4]=t[l],c[6]=l,c}function W(n){let t,l,c='<div class="w-10 rounded-full"><img alt="User Avatar" src=""/></div>',g,u,o=n[4].username+"",f,D,v,d=new Date(n[4].time).toLocaleTimeString()+"",a,s,m,e=n[4].message+"",x,I,_,T=n[4].status+"",k,C;return{c(){t=p("div"),l=p("div"),l.innerHTML=c,g=M(),u=p("div"),f=L(o),D=M(),v=p("time"),a=L(d),s=M(),m=p("div"),x=L(e),I=M(),_=p("div"),k=L(T),C=M(),this.h()},l(S){t=b(S,"DIV",{class:!0});var i=w(t);l=b(i,"DIV",{class:!0,"data-svelte-h":!0}),F(l)!=="svelte-ztbg9h"&&(l.innerHTML=c),g=E(i),u=b(i,"DIV",{class:!0});var V=w(u);f=j(V,o),D=E(V),v=b(V,"TIME",{class:!0});var H=w(v);a=j(H,d),H.forEach(y),V.forEach(y),s=E(i),m=b(i,"DIV",{class:!0});var z=w(m);x=j(z,e),z.forEach(y),I=E(i),_=b(i,"DIV",{class:!0});var P=w(_);k=j(P,T),P.forEach(y),C=E(i),i.forEach(y),this.h()},h(){h(l,"class","chat-image avatar"),h(v,"class","text-xs opacity-50"),h(u,"class","chat-header text-gray-700 dark:text-gray-300"),h(m,"class","chat-bubble bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),h(_,"class","chat-footer opacity-50 text-gray-600 dark:text-gray-400"),h(t,"class","chat chat-start")},m(S,i){N(S,t,i),r(t,l),r(t,g),r(t,u),r(u,f),r(u,D),r(u,v),r(v,a),r(t,s),r(t,m),r(m,x),r(t,I),r(t,_),r(_,k),r(t,C)},p(S,i){i&1&&o!==(o=S[4].username+"")&&O(f,o),i&1&&d!==(d=new Date(S[4].time).toLocaleTimeString()+"")&&O(a,d),i&1&&e!==(e=S[4].message+"")&&O(x,e),i&1&&T!==(T=S[4].status+"")&&O(k,T)},d(S){S&&y(t)}}}function ee(n){let t,l,c,g,u,o,f='<textarea class="textarea textarea-bordered w-full resize-none bg-white dark:bg-gray-600 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400" placeholder="Type your message..." id="message" name="message"></textarea> <button type="submit" class="btn btn-primary dark:bg-blue-700 dark:text-white">Send</button>',D,v,d=q(n[0]),a=[];for(let s=0;s<d.length;s+=1)a[s]=W(A(n,d,s));return{c(){t=p("section"),l=p("div"),c=p("div"),g=p("div");for(let s=0;s<a.length;s+=1)a[s].c();u=M(),o=p("form"),o.innerHTML=f,this.h()},l(s){t=b(s,"SECTION",{class:!0});var m=w(t);l=b(m,"DIV",{class:!0});var e=w(l);c=b(e,"DIV",{class:!0});var x=w(c);g=b(x,"DIV",{class:!0});var I=w(g);for(let _=0;_<a.length;_+=1)a[_].l(I);I.forEach(y),x.forEach(y),u=E(e),o=b(e,"FORM",{class:!0,method:!0,action:!0,"data-svelte-h":!0}),F(o)!=="svelte-uaxju5"&&(o.innerHTML=f),e.forEach(y),m.forEach(y),this.h()},h(){h(g,"class","flex-1 overflow-y-auto space-y-4 p-4"),h(c,"class","flex-1 overflow-y-auto space-y-4 p-4"),h(o,"class","flex items-center space-x-4"),h(o,"method","POST"),h(o,"action","?/sendMessage"),h(l,"class","shadow-lg rounded-lg p-6 container w-full max-w-md mx-auto flex flex-col space-y-4 h-[80vh]"),h(t,"class","flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-800")},m(s,m){N(s,t,m),r(t,l),r(l,c),r(c,g);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(g,null);r(l,u),r(l,o),D||(v=K(o,"submit",n[1]),D=!0)},p(s,[m]){if(m&1){d=q(s[0]);let e;for(e=0;e<d.length;e+=1){const x=A(s,d,e);a[e]?a[e].p(x,m):(a[e]=W(x),a[e].c(),a[e].m(g,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=d.length}},i:$,o:$,d(s){s&&y(t),Q(a,s),D=!1,v()}}}function te(n,t,l){let c;U(n,Z,f=>l(0,c=f)),B(()=>{X()});let g=c,u=localStorage.getItem("username");async function o(f){f.preventDefault();const v=f.target.querySelector("#message");try{let d={username:u,status:"Sent",message:v.value,time:Date.now()};Y(d),v.value=""}catch{console.log("that shit did not work")}console.log("the current messages: ",g)}return[c,o]}class re extends G{constructor(t){super(),J(this,t,te,ee,R,{})}}export{re as component,ne as universal};
